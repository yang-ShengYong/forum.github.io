{{extend './_layouts/home.html'}}

{{block 'title'}}{{'ynodejs--论坛首页'}}{{/block}}

{{ block 'head' }}
<style>
li.media
{
padding: 5px;
border-radius:5px;
-moz-border-radius:5px; /* Old Firefox */
background-color: #fff;
}
</style>
{{ /block }}

{{block 'body'}}
<section class="container">
    <div class="panel-heading">
      <ul class="nav nav-pills">
          <li role="presentation" class="active"><a href="#">全部</a></li>
          <li role="presentation"><a href="#">分享</a></li>
          <li role="presentation"><a href="#">问答</a></li>
          <li role="presentation"><a href="#">招聘</a></li>
          <li role="presentation"><a href="#">客户端测试</a></li>
      </ul>
    </div>
    <div class="">
      <ul class="media-list">
        {{ each topic }}
        <li class="media">
          <div class="media-left">
            <a href="#">
              <img width="40" height="40" class="media-object img-rounded" src="{{ $value.authorAvatar }}" alt="...">
            </a>
          </div>
          <div class="media-body">
            <h4 class="media-heading"><a href="/topics/123">{{ $value.title }}</a></h4>
            <p>{{ $value.content }}</p>
            <p>{{ $value.stars }}人关注&nbsp; {{ $value.reply }}人回复&nbsp; {{ $value.view_count }}浏览</p>
            <p>发布日期： {{ $value.created_time.getFullYear() }}-{{ $value.created_time.getMonth()+1 }}-{{ $value.created_time.getDate() }} 
              {{ $value.created_time.getHours() }}:{{ $value.created_time.getMinutes() }}:{{ $value.created_time.getSeconds() }}
            </p>
          </div>
        </li>
        {{ /each }}

        <!-- <li class="media">
      <div class="media-left">
        <a href="#">
          <img width="40" height="40" class="media-object" src="../public/img/avatar-max-img.png" alt="...">
        </a>
      </div>
      <div class="media-body">
        <h4 class="media-heading"><a href="/topics/123">Media heading</a></h4>
        <p>sueysok 回复了问题 • 2 人关注 • 1 个回复 • 187 次浏览 • 2017-10-20 13:45</p>
      </div>
    </li> -->
      </ul>
    </div>
  
  <nav aria-label="Page navigation">
    <!-- <ul class="pagination">
      <li>
        <a href="#" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li class="active"><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
      <li>
        <a href="#" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul> -->

    <p id="pagination-demo-text">当前第1页</p>
    <ul class="pagination pagination-demo">
      <li class="first disabled" jp-role="first" jp-data="1"><a href="javascript:void(0);">First</a></li>
      <li class="prev disabled" jp-role="prev" jp-data="0"><a href="javascript:void(0);">Previous</a></li>
      <li class="page active" jp-role="page" jp-data="1"><a href="javascript:void(0);">1</a></li>
      <li class="page" jp-role="page" jp-data="2"><a href="javascript:void(0);">2</a></li>
      <li class="page" jp-role="page" jp-data="3"><a href="javascript:void(0);">3</a></li>
      <li class="page" jp-role="page" jp-data="4"><a href="javascript:void(0);">4</a></li>
      <li class="page" jp-role="page" jp-data="5"><a href="javascript:void(0);">5</a></li>
      <li class="page" jp-role="page" jp-data="6"><a href="javascript:void(0);">6</a></li>
      <li class="page" jp-role="page" jp-data="7"><a href="javascript:void(0);">7</a></li>
      <li class="page" jp-role="page" jp-data="8"><a href="javascript:void(0);">8</a></li>
      <li class="page" jp-role="page" jp-data="9"><a href="javascript:void(0);">9</a></li>
      <li class="page" jp-role="page" jp-data="10"><a href="javascript:void(0);">10</a></li>
      <li class="next" jp-role="next" jp-data="2"><a href="javascript:void(0);">Next</a></li>
      <li class="last" jp-role="last" jp-data="100"><a href="javascript:void(0);">Last</a></li>
    </ul>
  </nav>
</section>
{{/block}}

{{ block 'script' }}
<script src="/node_modules/jq-paginator/dist/jq-paginator.min.js" type="text/javascript"></script>
<script>

  //分页脚本
  $('.pagination').jqPaginator({
    totalPages: {{ totalPages }},
    visiblePages: 5,
    currentPage: {{ currentPage }},
    onPageChange: function (num, type) {
      $('#pagination-demo-text').html('当前第' + num + '页');

      if (type === 'init') return
      
      window.location.href = '/page?page_num='+num
    }
  })
</script>
{{ /block }}